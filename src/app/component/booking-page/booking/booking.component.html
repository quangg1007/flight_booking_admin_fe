<div class="space-y-8">
  <!-- Tabs for Booking Types -->
  <div class="tabs tabs-boxed">
    <a
      class="tab tab-lg"
      [class.tab-active]="activeTab() === 'upcoming'"
      (click)="changeActiveTab('upcoming')"
      >Upcoming Bookings</a
    >
    <a
      class="tab tab-lg"
      [class.tab-active]="activeTab() === 'past'"
      (click)="changeActiveTab('past')"
      >Past Bookings</a
    >
  </div>

  <!-- Filters and Search -->
  <form class="flex gap-4 mb-6" [formGroup]="searchBookingForm">
    <div class="form-control">
      <input
        type="text"
        formControlName="search"
        name="search"
        placeholder="Search Booking ..."
        class="input input-bordered w-64"
      />
    </div>

    <div class="flex gap-2 items-center">
      <!-- Toggle between specific date and range -->
      <select class="select select-bordered" formControlName="dateFilterType">
        <option value="specific">Specific Date</option>
        <option value="range">Date Range</option>
      </select>

      <!-- Specific Date Input -->
      <div
        class="form-control"
        *ngIf="searchBookingForm.get('dateFilterType')?.value === 'specific'"
      >
        <input
          type="date"
          formControlName="specificDate"
          name="specificDate"
          class="input input-bordered"
        />
      </div>

      <!-- Date Range Inputs -->
      <ng-container
        *ngIf="searchBookingForm.get('dateFilterType')?.value === 'range'"
      >
        <div class="form-control">
          <input
            type="date"
            formControlName="startDate"
            name="startDate"
            class="input input-bordered"
          />
        </div>
        <span class="self-center">to</span>
        <div class="form-control">
          <input
            type="date"
            formControlName="endDate"
            name="endDate"
            class="input input-bordered"
          />
        </div>
      </ng-container>
    </div>

    <!-- Sort Options -->
    <select
      class="select select-bordered"
      formControlName="sortBy"
      name="sortBy"
    >
      <option value="">Sort By</option>
      <option value="booking_date">Booking Date</option>
      <option value="noPassengers">Capacity</option>
      <option value="total_price">Price</option>
    </select>

    <!-- Sort Order -->
    <select
      class="select select-bordered"
      formControlName="sortOrder"
      name="sortOrder"
    >
      <option value="">Sort Order</option>
      <option value="ASC">Ascending</option>
      <option value="DESC">Descending</option>
    </select>
  </form>

  <!-- Upcoming Bookings Table -->
  <app-upcomming-booking
    [isLoading]="isLoading()"
    [bookings]="upcomingBookings()"
    [totalBookings]="totalPageUpcomming()"
    [pageSize]="pageSize()"
    [currentPage]="currentPageUpcoming()"
    (bookingsChanged)="deleteBooking($event)"
    (BookingDetailChange)="bookingDetailChange($event)"
    (currentPageChange)="changeUpcomingBookingPage($event)"
    [activeTab]="activeTab()"
  ></app-upcomming-booking>

  <!-- Past Bookings Table -->
  <app-past-booking
    [isLoading]="isLoading()"
    [activeTab]="activeTab()"
    [totalBookings]="totalPagePast()"
    [pageSize]="pageSize()"
    [currentPage]="currentPageUpcoming()"
    [bookings]="pastBookings()"
    (currentPageChange)="changePastBookingPage($event)"
  ></app-past-booking>
</div>

<dialog id="ticket_modal" class="modal">
  <div class="modal-box w-11/12 max-w-5xl">
    <h3 class="font-bold text-lg mb-4">E-Ticket #VN456</h3>
    <!-- For PDF -->
    <!-- <iframe
      class="w-full h-[10vh]"
      src="
        https://www.shutterstock.com/image-vector/airplane-ticket-flight-boarding-pass-260nw-2278553741.jpg
      "
    ></iframe> -->
    <!-- Or for Image -->
    <img
      src="
        https://www.shutterstock.com/image-vector/airplane-ticket-flight-boarding-pass-260nw-2278553741.jpg
      "
      alt="E-Ticket"
      class="w-full"
    />
    <div class="modal-action">
      <form method="dialog">
        <button class="btn">Close</button>
      </form>
    </div>
  </div>
</dialog>
